<!-- Permission-help snippet: paste inside <body> near top -->
<div id="geo-help" style="padding:12px;background:#fff3cd;border:1px solid #ffeeba;border-radius:8px;max-width:720px;margin:12px auto;display:none;">
  <strong>Permission જોઈએછે</strong>
  <p id="geo-msg">આ સાઇટ માટે Location allow કરો — જુઓ નીચે સૂચનો.</p>
  <button onclick="window.location.reload()" style="margin-right:8px;">Try Again</button>
  <button onclick="showQuickSteps()">How to Allow</button>
  <div id="geo-steps" style="margin-top:10px;display:none;">
    <p><strong>Android Chrome:</strong> Lock icon → Site settings → Location → Allow</p>
    <p><strong>iPhone Safari:</strong> Settings → Privacy → Location Services → Safari Websites → While Using</p>
    <p><strong>Desktop Chrome:</strong> Lock icon → Site settings → Location → Allow</p>
  </div>
</div>

<script>
function showQuickSteps(){ document.getElementById('geo-steps').style.display='block'; }

function tryGetLocation(){
  if(!navigator.geolocation){
    alert('Geolocation supported? No.');
    return;
  }
  navigator.geolocation.getCurrentPosition(
    pos => {
      // success: hide help
      document.getElementById('geo-help').style.display='none';
      // your existing logic to show map/coords
      console.log('got position', pos);
    },
    err => {
      if(err.code === err.PERMISSION_DENIED){
        document.getElementById('geo-msg').innerText = 'You have blocked location for this site. Please allow it in your browser settings.';
        document.getElementById('geo-help').style.display = 'block';
      } else {
        document.getElementById('geo-msg').innerText = 'Location error: ' + err.message;
        document.getElementById('geo-help').style.display = 'block';
      }
    }
  );
}
tryGetLocation();
</script>
